<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.7"/>
<title>Electric arcs examples</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="icon.png"/></td>
    <td style="padding-left: 0.5em;">
    <div id="projectbrief">programmer&#39;s documentation</div>
    </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.7 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Home</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="cs_user_examples.html"><span>User&#160;examples</span></a></li>
      <li><a href="cs_var_dico.html"><span>Fortran-C&#160;naming&#160;reference</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="cs_user_examples.html">User examples</a></li><li class="navelem"><a class="el" href="cs_user_boundary_conditions_examples.html">cs_user_boundary_conditions.f90</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">Electric arcs examples </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="elec_loc_var"></a>
Local variables to be added</h1>
<div class="fragment"><div class="line"><span class="keywordtype">integer</span>          ifac, ii, iel</div>
<div class="line"><span class="keywordtype">integer</span>          idim</div>
<div class="line"><span class="keywordtype">integer</span>          izone,iesp</div>
<div class="line"><span class="keywordtype">integer</span>          ilelt, nlelt</div>
<div class="line"></div>
<div class="line"><span class="keywordtype">double precision</span> uref2, d2s3</div>
<div class="line"><span class="keywordtype">double precision</span> rhomoy, dhy, ustar2</div>
<div class="line"><span class="keywordtype">double precision</span> xkent, xeent</div>
<div class="line"><span class="keywordtype">double precision</span> z1   , z2</div>
<div class="line"></div>
<div class="line"><span class="keywordtype">integer</span>, <span class="keywordtype">allocatable</span>, <span class="keywordtype">dimension(:)</span> :: lstelt</div>
<div class="line"><span class="keywordtype">double precision</span>, <span class="keywordtype">dimension(:)</span>, <span class="keywordtype">pointer</span> :: bfpro_rom</div>
<div class="line"><span class="keywordtype">double precision</span>, <span class="keywordtype">dimension(:)</span>, <span class="keywordtype">pointer</span> :: cvara_potva</div>
</div><!-- fragment --> <h1><a class="anchor" id="elec_init"></a>
Initialization and finalization</h1>
<p>Initialization and finalization is similar to that of the base examples</p>
<h1><a class="anchor" id="electric_arcs_ex_1"></a>
Example 1</h1>
<p>For boundary faces of color 1 assign an inlet and assign a cathode for "electric" variables.</p>
<div class="fragment"><div class="line"><span class="comment">call field_get_val_s(ibrom, bfpro_rom)</span></div>
<div class="line"><span class="comment">!===================</span></div>
<div class="line"></div>
<div class="line"><span class="comment">call getfbr(&#39;1&#39;, nlelt, lstelt)</span></div>
<div class="line"><span class="comment">!==========</span></div>
<div class="line"></div>
<div class="line"><span class="keywordflow">do</span> ilelt = 1, nlelt</div>
<div class="line"></div>
<div class="line">  ifac = lstelt(ilelt)</div>
<div class="line"></div>
<div class="line">  <a class="code" href="group__coupled__case.html#ga60f3df1381261b9527adb47ac21aa62d">itypfb</a>(ifac) = <a class="code" href="group__paramx.html#gacd9bb8a485ad1e678b9a9a42ed812d22">ientre</a></div>
<div class="line"></div>
<div class="line">  <span class="comment">! Zone Number (from 1 to n)</span></div>
<div class="line">  izone = 1</div>
<div class="line"></div>
<div class="line">  <span class="comment">! Zone localization for a given face</span></div>
<div class="line">  <a class="code" href="group__coupled__case.html#ga835fee5118da238969d67e1c358d482a">izfppp</a>(ifac) = izone</div>
<div class="line"></div>
<div class="line">  rcodcl(ifac,<a class="code" href="group__main__variables.html#gab6cfa74e47a0d12d050a2754262a4b95">iu</a>,1) = 0.d0</div>
<div class="line">  rcodcl(ifac,<a class="code" href="group__main__variables.html#ga92b62f3d921525535a93525229a106a2">iv</a>,1) = 0.d0</div>
<div class="line">  rcodcl(ifac,<a class="code" href="group__main__variables.html#gafe8e8df233ec94d884116c7d0aa29ef2">iw</a>,1) = 0.d0</div>
<div class="line"></div>
<div class="line">  <span class="comment">! Turbulence</span></div>
<div class="line"></div>
<div class="line">  <span class="keywordflow">if</span> (<a class="code" href="group__turbulence.html#ga65b4137820e92089e0ae2eae651509e4">itytur</a>.eq.2 .or. <a class="code" href="group__turbulence.html#ga65b4137820e92089e0ae2eae651509e4">itytur</a>.eq.3                  &amp;</div>
<div class="line">       .or. <a class="code" href="group__turbulence.html#ga422877d65f809f5110d083afaad92854">iturb</a>.eq.50 .or. <a class="code" href="group__turbulence.html#ga422877d65f809f5110d083afaad92854">iturb</a>.eq.60            &amp;</div>
<div class="line">       .or. <a class="code" href="group__turbulence.html#ga422877d65f809f5110d083afaad92854">iturb</a>.eq.70) <span class="keywordflow">then</span></div>
<div class="line"></div>
<div class="line">    uref2 = rcodcl(ifac,<a class="code" href="group__main__variables.html#gab6cfa74e47a0d12d050a2754262a4b95">iu</a>,1)**2                    &amp;</div>
<div class="line">           +rcodcl(ifac,<a class="code" href="group__main__variables.html#ga92b62f3d921525535a93525229a106a2">iv</a>,1)**2                    &amp;</div>
<div class="line">           +rcodcl(ifac,<a class="code" href="group__main__variables.html#gafe8e8df233ec94d884116c7d0aa29ef2">iw</a>,1)**2</div>
<div class="line">    uref2 = max(uref2,1.d-12)</div>
<div class="line"></div>
<div class="line">    <span class="comment">! Turbulence example computed using equations valid for a pipe.</span></div>
<div class="line"></div>
<div class="line">    <span class="comment">! We will be careful to specify a hydraulic diameter adapted</span></div>
<div class="line">    <span class="comment">! to the current inlet.</span></div>
<div class="line"></div>
<div class="line">    <span class="comment">! We will also be careful if necessary to use a more precise</span></div>
<div class="line">    <span class="comment">! formula for the dynamic viscosity use in the calculation of</span></div>
<div class="line">    <span class="comment">! the Reynolds number (especially if it is variable, it may be</span></div>
<div class="line">    <span class="comment">! useful to take the law from &#39;usphyv&#39;. Here, we use by default</span></div>
<div class="line">    <span class="comment">! the &#39;viscl0&quot; value.</span></div>
<div class="line"></div>
<div class="line">    <span class="comment">! Regarding the density, we have acess to its value at boundary</span></div>
<div class="line">    <span class="comment">! faces (romb) so this value is the one used here (specifically,</span></div>
<div class="line">    <span class="comment">! it is consistent with the processing in &#39;usphyv&#39;, in case of</span></div>
<div class="line">    <span class="comment">! variable density)</span></div>
<div class="line"></div>
<div class="line">    <span class="comment">! Hydraulic diameter</span></div>
<div class="line">    dhy     = 0.075d0</div>
<div class="line"></div>
<div class="line">    <span class="comment">! Calculation of friction velocity squared (ustar2)</span></div>
<div class="line">    <span class="comment">! and of k and epsilon at the inlet (xkent and xeent) using</span></div>
<div class="line">    <span class="comment">! standard laws for a circular pipe</span></div>
<div class="line">    <span class="comment">! (their initialization is not needed here but is good practice).</span></div>
<div class="line"></div>
<div class="line">    rhomoy = bfpro_rom(ifac)</div>
<div class="line">    ustar2 = 0.d0</div>
<div class="line">    xkent  = <a class="code" href="group__cstnum.html#ga7ce13e6a1bb416f0bdffcaf431135084">epzero</a></div>
<div class="line">    xeent  = <a class="code" href="group__cstnum.html#ga7ce13e6a1bb416f0bdffcaf431135084">epzero</a></div>
<div class="line"></div>
<div class="line">    call <a class="code" href="turent_8f90.html#a689f0f36b3b4c8f1a62b83b61358c5f7">keendb</a>                                            &amp;</div>
<div class="line">    <span class="comment">!==========</span></div>
<div class="line">     ( uref2, dhy, rhomoy, <a class="code" href="group__cstphy.html#gab7fbc85b2a13abe8a8d6a4df343995b3">viscl0</a>, <a class="code" href="group__csttur.html#ga019fba8a896d405a7cae1c2f960fd521">cmu</a>, <a class="code" href="group__csttur.html#ga0cb384d0acda415e2d329b4d807c584a">xkappa</a>,            &amp;</div>
<div class="line">       ustar2, xkent, xeent)</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">if</span> (<a class="code" href="group__turbulence.html#ga65b4137820e92089e0ae2eae651509e4">itytur</a>.eq.2) <span class="keywordflow">then</span></div>
<div class="line"></div>
<div class="line">      rcodcl(ifac,<a class="code" href="group__main__variables.html#ga0da9329edbed84e564928b950e9d9570">ik</a>,1)  = xkent</div>
<div class="line">      rcodcl(ifac,<a class="code" href="group__main__variables.html#ga52f2cbc26bf83508a779335c668f2895">iep</a>,1) = xeent</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">elseif</span> (<a class="code" href="group__turbulence.html#ga65b4137820e92089e0ae2eae651509e4">itytur</a>.eq.3) <span class="keywordflow">then</span></div>
<div class="line"></div>
<div class="line">      rcodcl(ifac,<a class="code" href="group__main__variables.html#ga371f21c313d2820f269cc3dca293afe0">ir11</a>,1) = d2s3*xkent</div>
<div class="line">      rcodcl(ifac,<a class="code" href="group__main__variables.html#gad23a1c619be0989736f6a5ad37447790">ir22</a>,1) = d2s3*xkent</div>
<div class="line">      rcodcl(ifac,<a class="code" href="group__main__variables.html#gad511370b805821b77393645adcab562a">ir33</a>,1) = d2s3*xkent</div>
<div class="line">      rcodcl(ifac,<a class="code" href="group__main__variables.html#gafaa05f3eb9f8a6fdbf883159c8c38829">ir12</a>,1) = 0.d0</div>
<div class="line">      rcodcl(ifac,<a class="code" href="group__main__variables.html#ga7041cb277fde45af4f797bb0629f045d">ir13</a>,1) = 0.d0</div>
<div class="line">      rcodcl(ifac,<a class="code" href="group__main__variables.html#ga02ee51e389e3eb413a72d0ad688ffb39">ir23</a>,1) = 0.d0</div>
<div class="line">      rcodcl(ifac,<a class="code" href="group__main__variables.html#ga52f2cbc26bf83508a779335c668f2895">iep</a>,1)  = xeent</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">elseif</span> (<a class="code" href="group__turbulence.html#ga422877d65f809f5110d083afaad92854">iturb</a>.eq.50) <span class="keywordflow">then</span></div>
<div class="line"></div>
<div class="line">      rcodcl(ifac,<a class="code" href="group__main__variables.html#ga0da9329edbed84e564928b950e9d9570">ik</a>,1)   = xkent</div>
<div class="line">      rcodcl(ifac,<a class="code" href="group__main__variables.html#ga52f2cbc26bf83508a779335c668f2895">iep</a>,1)  = xeent</div>
<div class="line">      rcodcl(ifac,<a class="code" href="group__main__variables.html#ga77858fb6ee8205a2416db13742d80fe4">iphi</a>,1) = d2s3</div>
<div class="line">      rcodcl(ifac,<a class="code" href="group__main__variables.html#gaa1cc52ea19b5d872238313ce1460e84a">ifb</a>,1)  = 0.d0</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">elseif</span> (<a class="code" href="group__turbulence.html#ga422877d65f809f5110d083afaad92854">iturb</a>.eq.60) <span class="keywordflow">then</span></div>
<div class="line"></div>
<div class="line">      rcodcl(ifac,<a class="code" href="group__main__variables.html#ga0da9329edbed84e564928b950e9d9570">ik</a>,1)   = xkent</div>
<div class="line">      rcodcl(ifac,<a class="code" href="group__main__variables.html#gada4e3b8b2f79ca71ed8b3629e017bd53">iomg</a>,1) = xeent/<a class="code" href="group__csttur.html#ga019fba8a896d405a7cae1c2f960fd521">cmu</a>/xkent</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">elseif</span> (<a class="code" href="group__turbulence.html#ga422877d65f809f5110d083afaad92854">iturb</a>.eq.70) <span class="keywordflow">then</span></div>
<div class="line"></div>
<div class="line">      rcodcl(ifac,<a class="code" href="group__main__variables.html#gaa587bbda46fe2153de41858cecbd7902">inusa</a>,1) = <a class="code" href="group__csttur.html#ga019fba8a896d405a7cae1c2f960fd521">cmu</a>*xkent**2/xeent</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">endif</span></div>
<div class="line"></div>
<div class="line">  <span class="keywordflow">endif</span></div>
<div class="line"></div>
<div class="line">  <span class="comment">! --- Handle Scalars</span></div>
<div class="line"></div>
<div class="line">  <span class="comment">! Enthalpy in J/kg (iscalt)</span></div>
<div class="line">  <span class="comment">! On this example we impose the value of the enthalpy</span></div>
<div class="line">  <span class="comment">! the arbitrary value of 1.d6 corresponds to a temperature of 2200 Kelvin</span></div>
<div class="line">  <span class="comment">! for argon at atmospheric pressure (see dp_ELE)</span></div>
<div class="line"></div>
<div class="line">  ii = <a class="code" href="group__thermal.html#ga7bfe680df285604ff4e3e7a67ea0146e">iscalt</a></div>
<div class="line">  icodcl(ifac,<a class="code" href="group__main__variables.html#ga2307b4d54b829b3aeeddf6c1e4e1129f">isca</a>(ii))   = 1</div>
<div class="line">  rcodcl(ifac,<a class="code" href="group__main__variables.html#ga2307b4d54b829b3aeeddf6c1e4e1129f">isca</a>(ii),1) = 1.d6</div>
<div class="line"></div>
<div class="line">  <span class="comment">!  Electric potential  (ipotr)</span></div>
<div class="line">  <span class="comment">! (could corresponds also to the real part of the electrical potential if</span></div>
<div class="line">  <span class="comment">! Joule Effect by direct conduction)</span></div>
<div class="line"></div>
<div class="line">  <span class="comment">! In the Cathode example (electric arc applications),</span></div>
<div class="line">  <span class="comment">! we impose a constant value of the electrical potential which is zero,</span></div>
<div class="line">  <span class="comment">! assuming that the potential is equal to &quot;ipotr + an arbitrary constant&quot;</span></div>
<div class="line">  <span class="comment">! (What is important for electric arc is the difference between anode and</span></div>
<div class="line">  <span class="comment">! cathode potentials)</span></div>
<div class="line"></div>
<div class="line">  ii = <a class="code" href="group__elec__transported.html#ga637935d4aeed121c008f2edb30cf13bd">ipotr</a></div>
<div class="line">  icodcl(ifac,<a class="code" href="group__main__variables.html#ga2307b4d54b829b3aeeddf6c1e4e1129f">isca</a>(ii))   = 1</div>
<div class="line">  rcodcl(ifac,<a class="code" href="group__main__variables.html#ga2307b4d54b829b3aeeddf6c1e4e1129f">isca</a>(ii),1) = 0.d0</div>
<div class="line"></div>
<div class="line">  <span class="comment">! Mass fraction of the (n-1) gas mixture components</span></div>
<div class="line"></div>
<div class="line">  <span class="keywordflow">if</span> (<a class="code" href="group__thermophysical.html#ga6400e2a9201cf4db5da7ed38390914d4">ngazg</a> .gt. 1) <span class="keywordflow">then</span></div>
<div class="line">    <span class="keywordflow">do</span> iesp=1,<a class="code" href="group__thermophysical.html#ga6400e2a9201cf4db5da7ed38390914d4">ngazg</a>-1</div>
<div class="line">      ii = <a class="code" href="group__elec__transported.html#gacd37e9468fba80c15122157e8ed584c3">iycoel</a>(iesp)</div>
<div class="line">      icodcl(ifac,<a class="code" href="group__main__variables.html#ga2307b4d54b829b3aeeddf6c1e4e1129f">isca</a>(ii))   = 1</div>
<div class="line">      rcodcl(ifac,<a class="code" href="group__main__variables.html#ga2307b4d54b829b3aeeddf6c1e4e1129f">isca</a>(ii),1) = 0.d0</div>
<div class="line">    <span class="keywordflow">enddo</span></div>
<div class="line">  <span class="keywordflow">endif</span></div>
<div class="line"></div>
<div class="line">  <span class="comment">! Specific model for Joule effect by direct conduction:</span></div>
<div class="line">  <span class="comment">! Imaginary part of the potentiel (ipoti) is imposed to zero</span></div>
<div class="line"></div>
<div class="line">  <span class="keywordflow">if</span> (<a class="code" href="group__choice.html#ga54b751c891c8b72cb65537f6cbc1f493">ippmod</a>(<a class="code" href="group__choice.html#ga72d1e819111095a332e375e7e78ca6e4">ieljou</a>).ge. 2) <span class="keywordflow">then</span></div>
<div class="line">    ii = <a class="code" href="group__elec__transported.html#gab9e00174e2c288b3a61bcd9109319deb">ipoti</a></div>
<div class="line">    icodcl(ifac,<a class="code" href="group__main__variables.html#ga2307b4d54b829b3aeeddf6c1e4e1129f">isca</a>(ii))   = 1</div>
<div class="line">    rcodcl(ifac,<a class="code" href="group__main__variables.html#ga2307b4d54b829b3aeeddf6c1e4e1129f">isca</a>(ii),1) = 0.d0</div>
<div class="line">  <span class="keywordflow">endif</span></div>
<div class="line"></div>
<div class="line">  <span class="comment">! Specific model for Electric arc:</span></div>
<div class="line">  <span class="comment">! Vector Potential: Zero flux by default beacuse we don&#39;t a lot about</span></div>
<div class="line">  <span class="comment">! vector potential (what we know, is that A is equal to zero at the infinite)</span></div>
<div class="line"></div>
<div class="line">  <span class="comment">! All the boundary conditions for A are zero flux, except on some chosen faces</span></div>
<div class="line">  <span class="comment">! where we need to impose a value in order to have a stable calculation</span></div>
<div class="line">  <span class="comment">! (well defined problem)</span></div>
<div class="line">  <span class="comment">! These faces are chosen where we are sure that the electrical current density</span></div>
<div class="line">  <span class="comment">! remains very low generally far from the center of the electric arc and from</span></div>
<div class="line">  <span class="comment">! the electrodes (see above)</span></div>
<div class="line"></div>
<div class="line">  <span class="keywordflow">if</span> (<a class="code" href="group__choice.html#ga54b751c891c8b72cb65537f6cbc1f493">ippmod</a>(<a class="code" href="group__choice.html#ga370c836366486966f5703c1fcdf455a8">ielarc</a>).ge.2) <span class="keywordflow">then</span></div>
<div class="line">    <span class="keywordflow">do</span> idim= 1,<a class="code" href="group__electrical.html#ga724c777a89b82bb9aaa06979a1db348c">ndimve</a></div>
<div class="line">      ii = <a class="code" href="group__elec__transported.html#gadf504041beb738550f3c0de1d163e389">ipotva</a>(idim)</div>
<div class="line">      icodcl(ifac,<a class="code" href="group__main__variables.html#ga2307b4d54b829b3aeeddf6c1e4e1129f">isca</a>(ii))   = 3</div>
<div class="line">      rcodcl(ifac,<a class="code" href="group__main__variables.html#ga2307b4d54b829b3aeeddf6c1e4e1129f">isca</a>(ii),3) = 0.d0</div>
<div class="line">    <span class="keywordflow">enddo</span></div>
<div class="line">  <span class="keywordflow">endif</span></div>
<div class="line"></div>
<div class="line"><span class="keywordflow">enddo</span></div>
</div><!-- fragment --> <h1><a class="anchor" id="electric_arcs_ex_2"></a>
Example 2</h1>
<p>For boundary faces of color 5 assign an free outlet and example of electrode for Joule Effect by direct conduction.</p>
<div class="fragment"><div class="line"><span class="comment">call getfbr(&#39;5&#39;, nlelt, lstelt)</span></div>
<div class="line"><span class="comment">!==========</span></div>
<div class="line"></div>
<div class="line"><span class="keywordflow">do</span> ilelt = 1, nlelt</div>
<div class="line"></div>
<div class="line">  ifac = lstelt(ilelt)</div>
<div class="line"></div>
<div class="line">  <a class="code" href="group__coupled__case.html#ga60f3df1381261b9527adb47ac21aa62d">itypfb</a>(ifac)   = <a class="code" href="group__paramx.html#gadca0745d64c29b57e29c9fe0486420e9">isolib</a></div>
<div class="line"></div>
<div class="line">  <span class="comment">! Zone Number (from 1 to n)</span></div>
<div class="line">  izone = 2</div>
<div class="line"></div>
<div class="line">  <span class="comment">! Zone location for a given face</span></div>
<div class="line"></div>
<div class="line">  <a class="code" href="group__coupled__case.html#ga835fee5118da238969d67e1c358d482a">izfppp</a>(ifac) = izone</div>
<div class="line"></div>
<div class="line">  <span class="comment">! --- Handle Scalars</span></div>
<div class="line"></div>
<div class="line">  <span class="comment">! Enthalpy in J/kg  (By default zero flux with ISOLIB)</span></div>
<div class="line">  <span class="comment">!    Nothing to do</span></div>
<div class="line"></div>
<div class="line">  <span class="comment">! Mass fraction of the (n-1) gas mixture components</span></div>
<div class="line">  <span class="comment">! (Zero flux by defaut with ISOLIB)</span></div>
<div class="line">  <span class="comment">!    Nothing to do</span></div>
<div class="line"></div>
<div class="line">  <span class="comment">! Specific model for Joule Effect by direct conduction:</span></div>
<div class="line"></div>
<div class="line">  <span class="comment">! If you want to make a simulation with an imposed Power PUISIM</span></div>
<div class="line">  <span class="comment">! (you want to get PUISIM imposed in useli1 and PUISIM = Amp x Volt)</span></div>
<div class="line">  <span class="comment">! you need to impose IELCOR=1 in useli1</span></div>
<div class="line">  <span class="comment">! The boundary conditions will be scaled by COEJOU coefficient</span></div>
<div class="line">  <span class="comment">! for example the electrical potential will be multiplied bu COEJOU</span></div>
<div class="line">  <span class="comment">! (both real and imaginary part of the electrical potential if needed)</span></div>
<div class="line"></div>
<div class="line">  <span class="comment">! COEJOU is automatically defined in order that the calculated dissipated power</span></div>
<div class="line">  <span class="comment">! by Joule effect (both real and imaginary part if needed) is equal to PUISIM</span></div>
<div class="line"></div>
<div class="line">  <span class="comment">! At the beginning of the calculation, COEJOU ie equal to 1;</span></div>
<div class="line">  <span class="comment">! COEJOU is writing and reading in the result files.</span></div>
<div class="line"></div>
<div class="line">  <span class="comment">! If you don&#39;t want to calculate with by scaling,</span></div>
<div class="line">  <span class="comment">! you can impose directly the value.</span></div>
<div class="line"></div>
<div class="line">  <span class="keywordflow">if</span> (<a class="code" href="group__choice.html#ga54b751c891c8b72cb65537f6cbc1f493">ippmod</a>(<a class="code" href="group__choice.html#ga72d1e819111095a332e375e7e78ca6e4">ieljou</a>).ge. 1) <span class="keywordflow">then</span></div>
<div class="line">    ii = <a class="code" href="group__elec__transported.html#ga637935d4aeed121c008f2edb30cf13bd">ipotr</a></div>
<div class="line">    icodcl(ifac,<a class="code" href="group__main__variables.html#ga2307b4d54b829b3aeeddf6c1e4e1129f">isca</a>(ii))   = 1</div>
<div class="line">    <span class="keywordflow">if</span> (ielcor.eq.1) <span class="keywordflow">then</span></div>
<div class="line">      rcodcl(ifac,<a class="code" href="group__main__variables.html#ga2307b4d54b829b3aeeddf6c1e4e1129f">isca</a>(ii),1) = 500.d0*coejou</div>
<div class="line">    <span class="keywordflow">else</span></div>
<div class="line">      rcodcl(ifac,<a class="code" href="group__main__variables.html#ga2307b4d54b829b3aeeddf6c1e4e1129f">isca</a>(ii),1) = 500.d0</div>
<div class="line">    <span class="keywordflow">endif</span></div>
<div class="line">  <span class="keywordflow">endif</span></div>
<div class="line"></div>
<div class="line">  <span class="keywordflow">if</span> (<a class="code" href="group__choice.html#ga54b751c891c8b72cb65537f6cbc1f493">ippmod</a>(<a class="code" href="group__choice.html#ga72d1e819111095a332e375e7e78ca6e4">ieljou</a>).ge. 2) <span class="keywordflow">then</span></div>
<div class="line">    ii = <a class="code" href="group__elec__transported.html#gab9e00174e2c288b3a61bcd9109319deb">ipoti</a></div>
<div class="line">    icodcl(ifac,<a class="code" href="group__main__variables.html#ga2307b4d54b829b3aeeddf6c1e4e1129f">isca</a>(ii))   = 1</div>
<div class="line">    <span class="keywordflow">if</span> (ielcor.eq.1) <span class="keywordflow">then</span></div>
<div class="line">      rcodcl(ifac,<a class="code" href="group__main__variables.html#ga2307b4d54b829b3aeeddf6c1e4e1129f">isca</a>(ii),1) = sqrt(3.d0)*500.d0*coejou</div>
<div class="line">    <span class="keywordflow">else</span></div>
<div class="line">      rcodcl(ifac,<a class="code" href="group__main__variables.html#ga2307b4d54b829b3aeeddf6c1e4e1129f">isca</a>(ii),1) = sqrt(3.d0)*500.d0</div>
<div class="line">    <span class="keywordflow">endif</span></div>
<div class="line">  <span class="keywordflow">endif</span></div>
<div class="line"></div>
<div class="line"><span class="keywordflow">enddo</span></div>
</div><!-- fragment --> <h1><a class="anchor" id="electric_arcs_ex_3"></a>
Example 3</h1>
<p>For boundary faces of color 2 assign a free outlet and example of anode for electric arc.</p>
<div class="fragment"><div class="line"><span class="comment">call getfbr(&#39;2&#39;, nlelt, lstelt)</span></div>
<div class="line"><span class="comment">!==========</span></div>
<div class="line"></div>
<div class="line"><span class="keywordflow">do</span> ilelt = 1, nlelt</div>
<div class="line"></div>
<div class="line">  ifac = lstelt(ilelt)</div>
<div class="line"></div>
<div class="line">  <a class="code" href="group__coupled__case.html#ga60f3df1381261b9527adb47ac21aa62d">itypfb</a>(ifac)   = <a class="code" href="group__paramx.html#gadca0745d64c29b57e29c9fe0486420e9">isolib</a></div>
<div class="line"></div>
<div class="line">  <span class="comment">! Zone number (from 1 to n)</span></div>
<div class="line">  izone = 3</div>
<div class="line"></div>
<div class="line">  <span class="comment">! Zone localization for a given face</span></div>
<div class="line">  <a class="code" href="group__coupled__case.html#ga835fee5118da238969d67e1c358d482a">izfppp</a>(ifac) = izone</div>
<div class="line"></div>
<div class="line">  <span class="comment">! --- Handle scalars</span></div>
<div class="line"></div>
<div class="line">  <span class="comment">! Enthalpy in J/kg  (Zero flux by default with ISOLIB)</span></div>
<div class="line">  <span class="comment">!    Nothing to do</span></div>
<div class="line"></div>
<div class="line">  <span class="comment">! Real component of the electrical potential</span></div>
<div class="line"></div>
<div class="line">  <span class="comment">! For electric arc model,</span></div>
<div class="line">  <span class="comment">! ======================</span></div>
<div class="line">  <span class="comment">! *  we generally calculate the &quot;electric variables&quot; assuming that the total</span></div>
<div class="line">  <span class="comment">!    intensity of the electrical current is imposed (COUIMP is the value of</span></div>
<div class="line">  <span class="comment">!    the imposed total current).</span></div>
<div class="line"></div>
<div class="line">  <span class="comment">!    In that case, you need to impose IELCOR=1 in useli1</span></div>
<div class="line">  <span class="comment">!    The &quot;electrical variables&quot; will be scaled by COEPOT coefficient :</span></div>
<div class="line">  <span class="comment">!    for example the electrical potential will be multiplied by COEPOT,</span></div>
<div class="line">  <span class="comment">!    Joule effect will be multipied by COEPOT * COEPOT and so on (see uselrc.f90)</span></div>
<div class="line"></div>
<div class="line">  <span class="comment">!    COEJOU is defined in uselrc.fr : different possibilities are described in</span></div>
<div class="line">  <span class="comment">!    uselrc.f90, depending on the different physics you want to simulate</span></div>
<div class="line">  <span class="comment">!    (scaling from current, from power, special model for restriking ...)</span></div>
<div class="line"></div>
<div class="line">  <span class="comment">!    The variable DPOT is defined: it corresponds to the electrical potential</span></div>
<div class="line">  <span class="comment">!    difference between the electrodes (Anode potential - cathode Potential).</span></div>
<div class="line">  <span class="comment">!    DPOT is calculated in uselrc.f90. DPOT is saved at each time step, and</span></div>
<div class="line">  <span class="comment">!    for a following calculation</span></div>
<div class="line"></div>
<div class="line">  <span class="comment">!    DPOT is the value of the boundary condition on anode assuming that</span></div>
<div class="line">  <span class="comment">!    the cathode potential is equel to zero.</span></div>
<div class="line"></div>
<div class="line">  <span class="comment">! *  It is also possible to fix the value of the potential on the anode.</span></div>
<div class="line">  <span class="comment">!    (for example, 1000 Volts).</span></div>
<div class="line"></div>
<div class="line">  ii = <a class="code" href="group__elec__transported.html#ga637935d4aeed121c008f2edb30cf13bd">ipotr</a></div>
<div class="line">  icodcl(ifac,<a class="code" href="group__main__variables.html#ga2307b4d54b829b3aeeddf6c1e4e1129f">isca</a>(ii))   = 1</div>
<div class="line"></div>
<div class="line">  <span class="keywordflow">if</span> (<a class="code" href="group__choice.html#ga54b751c891c8b72cb65537f6cbc1f493">ippmod</a>(<a class="code" href="group__choice.html#ga370c836366486966f5703c1fcdf455a8">ielarc</a>).ge.1 .and. ielcor .eq.1) <span class="keywordflow">then</span></div>
<div class="line">    rcodcl(ifac,<a class="code" href="group__main__variables.html#ga2307b4d54b829b3aeeddf6c1e4e1129f">isca</a>(ii),1) = dpot</div>
<div class="line">  <span class="keywordflow">else</span></div>
<div class="line">    rcodcl(ifac,<a class="code" href="group__main__variables.html#ga2307b4d54b829b3aeeddf6c1e4e1129f">isca</a>(ii),1) = 1000.d0</div>
<div class="line">  <span class="keywordflow">endif</span></div>
<div class="line"></div>
<div class="line">  <span class="comment">! Mass fraction of the (n-1) gas mixture components</span></div>
<div class="line">  <span class="comment">!  zero flux by default with ISOLIB</span></div>
<div class="line">  <span class="comment">!  nothing to do</span></div>
<div class="line"></div>
<div class="line">  <span class="comment">! vector Potential</span></div>
<div class="line">  <span class="comment">!  zero flux by default with ISOLIB</span></div>
<div class="line">  <span class="comment">!  nothing to do</span></div>
<div class="line"></div>
<div class="line"><span class="keywordflow">enddo</span></div>
</div><!-- fragment --> <h1><a class="anchor" id="electric_arcs_ex_4"></a>
Example 4</h1>
<p>For boundary faces of color 3 assign a wall and example of potential vector Dirichlet condition</p>
<div class="fragment"><div class="line"><span class="comment">call getfbr(&#39;3&#39;, nlelt, lstelt)</span></div>
<div class="line"><span class="comment">!==========</span></div>
<div class="line"></div>
<div class="line"><span class="keywordflow">do</span> ilelt = 1, nlelt</div>
<div class="line"></div>
<div class="line">  ifac = lstelt(ilelt)</div>
<div class="line"></div>
<div class="line">  <a class="code" href="group__coupled__case.html#ga60f3df1381261b9527adb47ac21aa62d">itypfb</a>(ifac)   = <a class="code" href="group__paramx.html#ga6431a0e8fa2d4488763b8d07d1b0bc95">iparoi</a></div>
<div class="line"></div>
<div class="line">  <span class="comment">! Zone number (from 1 to n)</span></div>
<div class="line">  izone = 4</div>
<div class="line"></div>
<div class="line">  <span class="comment">! Zone localization for a given face</span></div>
<div class="line">  <a class="code" href="group__coupled__case.html#ga835fee5118da238969d67e1c358d482a">izfppp</a>(ifac) = izone</div>
<div class="line"></div>
<div class="line">  <span class="comment">! Wall: zero flow (zero flux for pressure)</span></div>
<div class="line">  <span class="comment">!       friction for velocities (+ turbulent variables)</span></div>
<div class="line">  <span class="comment">!       zero flux for scalars</span></div>
<div class="line"></div>
<div class="line">  <span class="comment">! --- Handle scalars</span></div>
<div class="line">  <span class="comment">!  Enthalpy in J/kg  (Zero flux by default)</span></div>
<div class="line">  <span class="comment">!     Nothing to do</span></div>
<div class="line"></div>
<div class="line">  <span class="comment">! Real component of the electrical potential</span></div>
<div class="line">  <span class="comment">!    Zero flux by default</span></div>
<div class="line">  <span class="comment">!    Nothing to do</span></div>
<div class="line"></div>
<div class="line">  <span class="comment">! Specific model for Electric arc :</span></div>
<div class="line">  <span class="comment">! ================================</span></div>
<div class="line"></div>
<div class="line">  <span class="comment">! Vector potential  A (Ax, Ay, Az)</span></div>
<div class="line"></div>
<div class="line">  <span class="comment">! Zero flux by default because we don&#39;t a lot about vector potential</span></div>
<div class="line">  <span class="comment">! (what we know, is that A is equal to zero at the infinite)</span></div>
<div class="line"></div>
<div class="line">  <span class="comment">! All the boundary conditions for A are zero flux, except on some chosen faces</span></div>
<div class="line">  <span class="comment">! where we need to impose a value in order to have a stable calculation</span></div>
<div class="line">  <span class="comment">! These faces are chosen where we are sure that the electrical current density</span></div>
<div class="line">  <span class="comment">! remains very low generally far from the center of the electric arc and from</span></div>
<div class="line">  <span class="comment">! the electrodes:</span></div>
<div class="line"></div>
<div class="line">  <span class="comment">! On the following example, we choose to impose a &quot;dirichlet&quot; value for the</span></div>
<div class="line">  <span class="comment">! 3 components of A on a small zone of the boundary located near the vertical</span></div>
<div class="line">  <span class="comment">! free outlet of the computation domain.</span></div>
<div class="line"></div>
<div class="line">  <span class="comment">! In this example, the electric arc is at the center of the computational domain,</span></div>
<div class="line">  <span class="comment">! located on z axis (near x = 0 and y = 0).</span></div>
<div class="line">  <span class="comment">! The x (1st) and y (the 3rd) coordinates are contained between</span></div>
<div class="line">  <span class="comment">! -2.5 cm nd 2.5 cm:</span></div>
<div class="line"></div>
<div class="line">  <span class="comment">!    Ax(t, x,y,z) = Ax(t-dt, x=2.5cm, y=2.5cm, z)</span></div>
<div class="line">  <span class="comment">!    Ay(t, x,y,z) = Ay(t-dt, x=2.5cm, y=2.5cm, z)</span></div>
<div class="line">  <span class="comment">!    Az(t, x,y,z) = Az(t-dt, x=2.5cm, y=2.5cm, z)</span></div>
<div class="line"></div>
<div class="line">  <span class="keywordflow">if</span> (<a class="code" href="group__choice.html#ga54b751c891c8b72cb65537f6cbc1f493">ippmod</a>(<a class="code" href="group__choice.html#ga370c836366486966f5703c1fcdf455a8">ielarc</a>).ge.2) <span class="keywordflow">then</span></div>
<div class="line">    <span class="keywordflow">if</span> (<a class="code" href="group__mesh.html#ga711b20cb174268b8ffcdc0e052eae53d">cdgfbo</a>(1,ifac) .le.  2.249d-2  .or.                      &amp;</div>
<div class="line">        <a class="code" href="group__mesh.html#ga711b20cb174268b8ffcdc0e052eae53d">cdgfbo</a>(1,ifac) .ge.  2.249d-2  .or.                      &amp;</div>
<div class="line">        <a class="code" href="group__mesh.html#ga711b20cb174268b8ffcdc0e052eae53d">cdgfbo</a>(3,ifac) .le. -2.249d-2  .or.                      &amp;</div>
<div class="line">        <a class="code" href="group__mesh.html#ga711b20cb174268b8ffcdc0e052eae53d">cdgfbo</a>(3,ifac) .ge.  2.249d-2      ) <span class="keywordflow">then</span></div>
<div class="line">      iel = <a class="code" href="group__mesh.html#ga0d1cf9f4d3d0b6219ac4c4bda4797470">ifabor</a>(ifac)</div>
<div class="line">      <span class="keywordflow">do</span> idim = 1, <a class="code" href="group__electrical.html#ga724c777a89b82bb9aaa06979a1db348c">ndimve</a></div>
<div class="line">        ii = <a class="code" href="group__elec__transported.html#gadf504041beb738550f3c0de1d163e389">ipotva</a>(idim)</div>
<div class="line">        call <a class="code" href="classfield.html#a7eb65512562d5475dc4281642f27767f">field_get_val_prev_s</a>(<a class="code" href="group__field__map.html#ga57aa6fc90649d0b34039aa88d2fec6f4">ivarfl</a>(<a class="code" href="group__main__variables.html#ga2307b4d54b829b3aeeddf6c1e4e1129f">isca</a>(ii)), cvara_potva)</div>
<div class="line">        icodcl(ifac,<a class="code" href="group__main__variables.html#ga2307b4d54b829b3aeeddf6c1e4e1129f">isca</a>(ii))   = 1</div>
<div class="line">        rcodcl(ifac,<a class="code" href="group__main__variables.html#ga2307b4d54b829b3aeeddf6c1e4e1129f">isca</a>(ii),1) = cvara_potva(iel)</div>
<div class="line">      <span class="keywordflow">enddo</span></div>
<div class="line">    <span class="keywordflow">endif</span></div>
<div class="line">  <span class="keywordflow">endif</span></div>
<div class="line"></div>
<div class="line"><span class="keywordflow">enddo</span></div>
</div><!-- fragment --> <h1><a class="anchor" id="electric_arcs_ex_5"></a>
Example 5</h1>
<p>For boundary faces of color 51 assign a wall and restriking model for electric arc (anode boundaray condition).</p>
<div class="fragment"><div class="line"><span class="comment">call getfbr(&#39;51&#39;, nlelt, lstelt)</span></div>
<div class="line"><span class="comment">!==========</span></div>
<div class="line"></div>
<div class="line"><span class="keywordflow">do</span> ilelt = 1, nlelt</div>
<div class="line"></div>
<div class="line">  ifac = lstelt(ilelt)</div>
<div class="line"></div>
<div class="line">  <a class="code" href="group__coupled__case.html#ga60f3df1381261b9527adb47ac21aa62d">itypfb</a>(ifac)   = <a class="code" href="group__paramx.html#ga6431a0e8fa2d4488763b8d07d1b0bc95">iparoi</a></div>
<div class="line"></div>
<div class="line">  <span class="comment">! Zone number (from 1 to n)</span></div>
<div class="line">  izone = 5</div>
<div class="line"></div>
<div class="line">  <span class="comment">! Zone localization for a given face</span></div>
<div class="line">  <a class="code" href="group__coupled__case.html#ga835fee5118da238969d67e1c358d482a">izfppp</a>(ifac) = izone</div>
<div class="line"></div>
<div class="line">  <span class="comment">! ---- Enthalpy (J/kg) :</span></div>
<div class="line">  <span class="comment">!      imposed heat transfer coefficient</span></div>
<div class="line"></div>
<div class="line">  ii=<a class="code" href="group__thermal.html#ga7bfe680df285604ff4e3e7a67ea0146e">iscalt</a></div>
<div class="line">  icodcl(ifac,<a class="code" href="group__main__variables.html#ga2307b4d54b829b3aeeddf6c1e4e1129f">isca</a>(ii))   = 1</div>
<div class="line">  rcodcl(ifac,<a class="code" href="group__main__variables.html#ga2307b4d54b829b3aeeddf6c1e4e1129f">isca</a>(ii),1) = 2.d4</div>
<div class="line">  rcodcl(ifac,<a class="code" href="group__main__variables.html#ga2307b4d54b829b3aeeddf6c1e4e1129f">isca</a>(ii),2) = 1.d5</div>
<div class="line"></div>
<div class="line">  <span class="comment">! Real electrical potential: anode boundary condition;</span></div>
<div class="line">  <span class="comment">! dpot calculated in uselrc.f</span></div>
<div class="line"></div>
<div class="line">  ii = <a class="code" href="group__elec__transported.html#ga637935d4aeed121c008f2edb30cf13bd">ipotr</a></div>
<div class="line">  icodcl(ifac,<a class="code" href="group__main__variables.html#ga2307b4d54b829b3aeeddf6c1e4e1129f">isca</a>(ii))   = 1</div>
<div class="line"></div>
<div class="line">  <span class="keywordflow">if</span> (<a class="code" href="group__choice.html#ga54b751c891c8b72cb65537f6cbc1f493">ippmod</a>(<a class="code" href="group__choice.html#ga370c836366486966f5703c1fcdf455a8">ielarc</a>).ge.1 .and. ielcor .eq.1) <span class="keywordflow">then</span></div>
<div class="line">    rcodcl(ifac,<a class="code" href="group__main__variables.html#ga2307b4d54b829b3aeeddf6c1e4e1129f">isca</a>(ii),1) = dpot</div>
<div class="line">  <span class="keywordflow">else</span></div>
<div class="line">    rcodcl(ifac,<a class="code" href="group__main__variables.html#ga2307b4d54b829b3aeeddf6c1e4e1129f">isca</a>(ii),1) = 100.d0</div>
<div class="line">  <span class="keywordflow">endif</span></div>
<div class="line"></div>
<div class="line">  <span class="comment">! Restriking modeling:</span></div>
<div class="line">  <span class="comment">! ===================</span></div>
<div class="line">  <span class="comment">!    example to fit depending on the case, the geometry etc...</span></div>
<div class="line">  <span class="comment">!     and also in agreement with uselrc.fr</span></div>
<div class="line"></div>
<div class="line">  <span class="keywordflow">if</span> (<a class="code" href="group__choice.html#ga54b751c891c8b72cb65537f6cbc1f493">ippmod</a>(<a class="code" href="group__choice.html#ga370c836366486966f5703c1fcdf455a8">ielarc</a>).ge.1 .and. ielcor .eq.1) <span class="keywordflow">then</span></div>
<div class="line">    <span class="keywordflow">if</span> (iclaq.eq.1 .and. <a class="code" href="group__time__step__options.html#ga8893d91edb2d95d49bfeadfe9a3b12db">ntcabs</a>.le.ntdcla+30) <span class="keywordflow">then</span></div>
<div class="line"></div>
<div class="line">      z1 = zclaq - 2.d-4</div>
<div class="line">      <span class="keywordflow">if</span> (z1.le.0.d0) z1 = 0.d0</div>
<div class="line">      z2 = zclaq + 2.d-4</div>
<div class="line">      <span class="keywordflow">if</span> (z2.ge.2.d-2) z2 = 2.d-2</div>
<div class="line"></div>
<div class="line">      <span class="keywordflow">if</span> (<a class="code" href="group__mesh.html#ga711b20cb174268b8ffcdc0e052eae53d">cdgfbo</a>(3,ifac).ge.z1 .and. <a class="code" href="group__mesh.html#ga711b20cb174268b8ffcdc0e052eae53d">cdgfbo</a>(3,ifac).le.z2) <span class="keywordflow">then</span></div>
<div class="line">        icodcl(ifac,<a class="code" href="group__main__variables.html#ga2307b4d54b829b3aeeddf6c1e4e1129f">isca</a>(ii))   = 1</div>
<div class="line">        rcodcl(ifac,<a class="code" href="group__main__variables.html#ga2307b4d54b829b3aeeddf6c1e4e1129f">isca</a>(ii),1) = dpot</div>
<div class="line">      <span class="keywordflow">else</span></div>
<div class="line">        icodcl(ifac,<a class="code" href="group__main__variables.html#ga2307b4d54b829b3aeeddf6c1e4e1129f">isca</a>(ii))   = 3</div>
<div class="line">        rcodcl(ifac,<a class="code" href="group__main__variables.html#ga2307b4d54b829b3aeeddf6c1e4e1129f">isca</a>(ii),3) = 0.d0</div>
<div class="line">      <span class="keywordflow">endif</span></div>
<div class="line">    <span class="keywordflow">endif</span></div>
<div class="line">  <span class="keywordflow">endif</span></div>
<div class="line"></div>
<div class="line">  <span class="comment">! Vector potential : Zero flux</span></div>
<div class="line"></div>
<div class="line">  <span class="keywordflow">if</span> (<a class="code" href="group__choice.html#ga54b751c891c8b72cb65537f6cbc1f493">ippmod</a>(<a class="code" href="group__choice.html#ga370c836366486966f5703c1fcdf455a8">ielarc</a>).ge.2) <span class="keywordflow">then</span></div>
<div class="line">    <span class="keywordflow">do</span> idim= 1,<a class="code" href="group__electrical.html#ga724c777a89b82bb9aaa06979a1db348c">ndimve</a></div>
<div class="line">      ii = <a class="code" href="group__elec__transported.html#gadf504041beb738550f3c0de1d163e389">ipotva</a>(idim)</div>
<div class="line">      icodcl(ifac,<a class="code" href="group__main__variables.html#ga2307b4d54b829b3aeeddf6c1e4e1129f">isca</a>(ii))   = 3</div>
<div class="line">      rcodcl(ifac,<a class="code" href="group__main__variables.html#ga2307b4d54b829b3aeeddf6c1e4e1129f">isca</a>(ii),3) = 0.d0</div>
<div class="line">    <span class="keywordflow">enddo</span></div>
<div class="line">  <span class="keywordflow">endif</span></div>
<div class="line"></div>
<div class="line"><span class="keywordflow">enddo</span></div>
</div><!-- fragment --> <h1><a class="anchor" id="electric_arcs_ex_6"></a>
Example 6</h1>
<p>For boundary faces of color 4 assign a symmetry.</p>
<div class="fragment"><div class="line"><span class="comment">call getfbr(&#39;4&#39;, nlelt, lstelt)</span></div>
<div class="line"><span class="comment">!==========</span></div>
<div class="line"></div>
<div class="line"><span class="keywordflow">do</span> ilelt = 1, nlelt</div>
<div class="line"></div>
<div class="line">  ifac = lstelt(ilelt)</div>
<div class="line"></div>
<div class="line">  <span class="comment">! Symmetries</span></div>
<div class="line"></div>
<div class="line">  <a class="code" href="group__coupled__case.html#ga60f3df1381261b9527adb47ac21aa62d">itypfb</a>(ifac)   = <a class="code" href="group__paramx.html#ga6e100e4fbfa13c374c51e7414a3e267a">isymet</a></div>
<div class="line"></div>
<div class="line">  <span class="comment">! Zone number (from 1 to n)</span></div>
<div class="line">  izone = 6</div>
<div class="line"></div>
<div class="line">  <span class="comment">! Zone localization for a given face</span></div>
<div class="line">  <a class="code" href="group__coupled__case.html#ga835fee5118da238969d67e1c358d482a">izfppp</a>(ifac) = izone</div>
<div class="line"></div>
<div class="line">  <span class="comment">! For all scalars, by default a zero flux condition is assumed</span></div>
<div class="line">  <span class="comment">! (for potentials also)</span></div>
<div class="line"></div>
<div class="line">  <span class="comment">! In Joule effect direct conduction,</span></div>
<div class="line">  <span class="comment">! we can use an anti-symetry condition for the imaginary component of the</span></div>
<div class="line">  <span class="comment">! electrical potential depending on the electrode configuration:</span></div>
<div class="line"></div>
<div class="line">  <span class="keywordflow">if</span> (<a class="code" href="group__choice.html#ga54b751c891c8b72cb65537f6cbc1f493">ippmod</a>(<a class="code" href="group__choice.html#ga72d1e819111095a332e375e7e78ca6e4">ieljou</a>).ge. 2) <span class="keywordflow">then</span></div>
<div class="line">    ii = <a class="code" href="group__elec__transported.html#gab9e00174e2c288b3a61bcd9109319deb">ipoti</a></div>
<div class="line">    icodcl(ifac,<a class="code" href="group__main__variables.html#ga2307b4d54b829b3aeeddf6c1e4e1129f">isca</a>(ii))   = 1</div>
<div class="line">    rcodcl(ifac,<a class="code" href="group__main__variables.html#ga2307b4d54b829b3aeeddf6c1e4e1129f">isca</a>(ii),1) = 0.d0</div>
<div class="line">  <span class="keywordflow">endif</span></div>
<div class="line"></div>
<div class="line"><span class="keywordflow">enddo</span></div>
</div><!-- fragment --></div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Wed Apr 6 2016 17:20:36 by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.7
</small></address>
</body>
</html>
