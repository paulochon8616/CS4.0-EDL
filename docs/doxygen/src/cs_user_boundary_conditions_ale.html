<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.7"/>
<title>Examples of data settings for boundary conditions ale (cs_user_boundary_conditions_ale.f90)</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="icon.png"/></td>
    <td style="padding-left: 0.5em;">
    <div id="projectbrief">programmer&#39;s documentation</div>
    </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.7 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Home</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="cs_user_examples.html"><span>User&#160;examples</span></a></li>
      <li><a href="cs_var_dico.html"><span>Fortran-C&#160;naming&#160;reference</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="cs_user_examples.html">User examples</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">Examples of data settings for boundary conditions ale (cs_user_boundary_conditions_ale.f90) </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>User subroutine dedicated the use of ALE (Arbitrary Lagrangian Eulerian) Method:</p>
<ul>
<li>Fills boundary conditions (<code>ialtyb</code>, <code>icodcl</code>, <code>rcodcl</code>) for mesh velocity.</li>
<li>This subroutine also enables one to fix displacement on nodes.</li>
</ul>
<h1><a class="anchor" id="intro_ale"></a>
Introduction</h1>
<p>Here one defines boundary conditions on a per-face basis.</p>
<p>Boundary faces may be identified using the <a class="el" href="cs__selector__f2c_8f90.html#a15b3c47b14d96445222d40944aa0d6e1">getfbr</a> subroutine. The syntax of this subroutine is described in <code><a class="el" href="cs__user__boundary__conditions_8f90.html" title="User subroutine which fills boundary conditions arrays (icodcl, rcodcl) for unknown variables...">cs_user_boundary_conditions.f90</a></code> subroutine, but a more thorough description can be found in the user guide.</p>
<p>Boundary conditions setup for standard variables (pressure, velocity, turbulence, scalars) is described precisely in <code><a class="el" href="cs__user__boundary__conditions_8f90.html" title="User subroutine which fills boundary conditions arrays (icodcl, rcodcl) for unknown variables...">cs_user_boundary_conditions.f90</a></code> subroutine.</p>
<p>Detailed explanation will be found in the theory guide.</p>
<h1><a class="anchor" id="bc_types_ale"></a>
Boundary condition types</h1>
<p>Boundary conditions may be assigned in two ways.</p>
<h2><a class="anchor" id="std_bcs_ale"></a>
For "standard" boundary conditions</h2>
<p>One defines a code in the <code>ialtyb</code> array (of dimensions number of boundary faces). The available codes are:</p>
<ul>
<li><code>ialtyb(ifac)</code> = <code>ibfixe:</code> the face <code>ifac</code> is considered to be motionless. A zero Dirichlet boundary condition is automatically imposed on mesh velocity. Moreover the displacement of corresponding nodes will automatically be set to 0 (for further information please read the paragraph dedicated to the description of <code>impale</code> array in the <a class="el" href="usalcl_8f90.html" title="User subroutine dedicated the use of ALE (Arbitrary Lagrangian Eulerian) Method: ">usalcl.f90</a> subroutine), unless the USER has modified the condition of at least one mesh velocity component (modification of <code>icodcl</code> array, please read the following paragraph <a class="el" href="cs_user_boundary_conditions_ale.html#non_std_bc_ale">For "non-standard" conditions</a>)</li>
<li><code>ialtyb(ifac)</code> = <code>igliss:</code> The mesh slides on corresponding face <code>ifac</code>. The normal component of mesh velocity is automatically set to 0. A homogeneous Neumann condition is automatically prescribed for the other components, as it's the case for 'Symmetry' fluid condition.</li>
<li><code>ialtyb(ifac)</code> = <code>ivimpo:</code> the mesh velocity is imposed on face <code>ifac</code>. Thus, the users needs to specify the mesh velocity values filling <code>rcodcl</code> arrays as follows:<ul>
<li><code>rcodcl(ifac,iuma,1)</code> = mesh velocity in 'x' direction</li>
<li><code>rcodcl(ifac,ivma,1)</code> = mesh velocity in 'y' direction</li>
<li><code>rcodcl(ifac,iwma,1)</code> = mesh velocity in 'z' direction</li>
</ul>
Components of <code>rcodcl</code>(.,i.ma,1) arrays that are not specified by user will automatically be set to 0, meaning that user only needs to specify non zero mesh velocity components.</li>
</ul>
<h2><a class="anchor" id="non_std_bc_ale"></a>
For "non-standard" conditions</h2>
<p>Other than (fixed boundary, sliding mesh boundary, fixed velocity), one defines for each face and each component <code>IVAR</code> = IUMA, IVMA, IWMA:</p><ul>
<li>a code<ul>
<li><code>icodcl(ifac, ivar)</code> </li>
</ul>
</li>
<li>three real values:<ul>
<li><code>rcodcl(ifac, ivar, 1)</code> </li>
<li><code>rcodcl(ifac, ivar, 2)</code> </li>
<li><code>rcodcl(ifac, ivar, 3)</code> </li>
</ul>
</li>
</ul>
<p>The value of <code>icodcl</code> is taken from the following:</p><ul>
<li>1: Dirichlet</li>
<li>3: Neumann</li>
<li>4: Symmetry</li>
</ul>
<p>The values of the 3 <code>rcodcl</code> components are:</p><ul>
<li><code>rcodcl(ifac, ivar, 1)</code>: Dirichlet for the variable if <code>icodcl(ifac, ivar)</code> = 1 The dimension of <code>rcodcl(ifac, ivar, 1)</code> is in <img class="formulaInl" alt="$m \cdot s^{-1}$" src="form_519.png"/></li>
<li><code>rcodcl(ifac, ivar, 2)</code>: "exterior" exchange coefficient (between the prescribed value and the value at the domain boundary),<br />
 rinfin = infinite by default <img class="formulaInl" alt="$ rcodcl(ifac,ivar,2) = \dfrac{VISCMA}{d} $" src="form_520.png"/> (d has the dimension of a distance in <img class="formulaInl" alt="$m$" src="form_362.png"/>, <img class="formulaInl" alt="$VISCMA$" src="form_521.png"/> stands for the mesh viscosity)</li>
</ul>
<dl class="section remark"><dt>Remarks</dt><dd><ul>
<li>The definition of <code>rcodcl</code>(.,.,2) is based on the manner other standard variables are managed in the same case. This type of boundary condition appears nonsense concerning mesh in that context.<ul>
<li><code>rcodcl(ifac,ivar,3)</code> : Flux density (in <img class="formulaInl" alt="$kg \cdot m \cdot s^2$" src="form_522.png"/>) = J if icodcl(ifac, ivar) = 3 (&lt;0 if gain, n outwards-facing normal) <img class="formulaInl" alt="$ rcodcl(ifac,ivar,3) = -(VISCMA) \grad {Um}.\vect{n} $" src="form_523.png"/> <img class="formulaInl" alt="$(Um$" src="form_524.png"/> represents mesh velocity)</li>
</ul>
</li>
<li>The definition of condition <code>rcodcl(ifac,ivar,3)</code> is based on the manner other standard variables are managed in the same case. <code>rcodcl</code>(.,.,3) = 0.d0 enables one to specify a homogeneous Neuman condition on mesh velocity. Any other value will be physically nonsense in that context.</li>
<li>If the user assigns a value to <code>ialtyb</code> equal to <code>ibfixe</code>, <code>igliss</code>, or <code>ivimpo</code> and does not modify <code>icodcl</code> (zero value by default), <code>ialtyb</code> will define the boundary condition type.</li>
</ul>
</dd></dl>
<p>To the contrary, if the user prescribes <code>icodcl(ifac, ivar)</code> (nonzero), the values assigned to rcodcl will be used for the considered face and variable (if rcodcl values are not set, the default values will be used for the face and variable, so:</p><ul>
<li><code>rcodcl(ifac, ivar, 1)</code> = 0.d0</li>
<li><code>rcodcl(ifac, ivar, 2)</code> = rinfin</li>
<li><code>rcodcl(ifac, ivar, 3)</code> = 0.d0)</li>
</ul>
<p>If the user decides to prescribe his own non-standard boundary conditions, it will be necessary to assign values to <code>icodcl</code> AND to <code>rcodcl</code> for ALL mesh velocity components. Thus, the user does not need to assign values to <code>ialtyb</code> for each associated face, as it will not be taken into account in the code.</p>
<h2><a class="anchor" id="cons_rul_ale"></a>
Consistency rules</h2>
<p>A consistency rules between <code>icodcl</code> codes for variables with non-standard boundary conditions:</p><ul>
<li>If a symetry code (<code>icodcl</code> = 4) is imposed for one mesh velocity component, one must have the same condition for all other mesh velocity components.</li>
</ul>
<h2><a class="anchor" id="fix_nod_ale"></a>
Fixed displacement on nodes</h2>
<p>For a better precision concerning mesh displacement, one can also assign values of displacement to certain internal and/or boundary nodes. Thus, one need to fill <code>depale</code> and <code>impale</code> arrays :</p><ul>
<li><code>depale(1,inod)</code> = displacement of node inod in 'x' direction</li>
<li><code>depale(2,inod)</code> = displacement of node inod in 'y' direction</li>
<li><code>depale(3,inod)</code> = displacement of node inod in 'z' direction This array is defined as the total displacement of the node compared its initial position in initial mesh. <code>impale(inod)</code> = 1 indicates that the displacement of node inod is imposed.</li>
</ul>
<dl class="section note"><dt>Note</dt><dd><code>impale</code> array is initialized to the value of 0; if its value is not modified, corresponding value in <code>DEPALE</code> array will not be taken into account.</dd></dl>
<p>During mesh's geometry re-calculation at each time step, the position of the nodes, which displacement is fixed (<code>i.e</code>. <code>impale=1</code>), is not calculated using the value of mesh velocity at the center of corresponding cell, but directly filled using the values of <code>depale</code>.</p>
<p>If the displacement is fixed for all nodes of a boundary face it's not necessary to prescribe boundary conditions at this face on mesh velocity. <code>icodcl</code> and <code>rcodcl</code> values will be overwritten:</p><ul>
<li><code>icodcl</code> is automatically set to 1 (Dirichlet)</li>
<li><code>rcodcl</code> value will be automatically set to face's mean mesh velocity value, that is calculated using <code>DEPALE</code> array.</li>
</ul>
<p>If a fixed boundary condition (<code>ialtyb(ifac)=ibfixe</code>) is imposed to the face <code>ifac</code>, the displacement of each node <code>inod</code> belonging to <code>ifac</code> is considered to be fixed, meaning that <code>impale(inod)</code> = 1 and <code>depale</code>(.,inod) = 0.d0.</p>
<h3><a class="anchor" id="nod_des_ale"></a>
Description of nodes</h3>
<p><code>nnod</code> gives the total (internal and boundary) number of nodes. Vertices coordinates are given by <code>xyznod(3, nnod)</code> array. This table is updated at each time step of the calculation. <code>xyzno0(3,nnod)</code> gives the coordinates of initial mesh at the beginning of the calculation.</p>
<p>The faces - nodes connectivity is stored by means of four integer arrays : <code>ipnfac</code>, <code>nodfac</code>, <code>ipnfbr</code>, <code>nodfbr</code>.</p>
<p><code>nodfac(nodfbr)</code> stores sequentially the index-numbers of the nodes of each internal (boundary) face. <code>ipnfac(ipnfbr)</code> gives the position of the first node of each internal (boundary) face in the array <code>nodfac(nodfbr)</code>.</p>
<p>For example, in order to get all nodes of internal face <code>ifac</code>, one can use the following loop:</p>
<div class="fragment"><div class="line"><span class="keywordflow">do</span> ii = ipnfac(ifac), ipnfac(ifac+1)-1 !! index number of nodfac array</div>
<div class="line">                                       !! corresponding to ifac</div>
<div class="line"></div>
<div class="line">  inod = nodfac(ii)                    !! index-number iith node of face ifac.</div>
<div class="line">  !! ...</div>
<div class="line">enddo</div>
</div><!-- fragment --><h2><a class="anchor" id="flui_bc_ale"></a>
Influence on boundary conditions related to fluid velocity</h2>
<p>The effect of fluid velocity and ALE modeling on boundary faces that are declared as walls (<code>itypfb</code> = <code>iparoi</code> or <code>iparug</code>) really depends on the physical nature of this interface.</p>
<p>Indeed when studying an immersed structure the motion of corresponding boundary faces is the one of the structure, meaning that it leads to fluid motion. On the other hand when studying a piston the motion of vertices belonging to lateral boundaries has no physical meaning therefore it has no influence on fluid motion.</p>
<p>Whatever the case, mesh velocity component that is normal to the boundary face is always taken into account ( <img class="formulaInl" alt="$ \vect{u}_{fluid} \cdot \vect{n} = \vect{w}_{mesh} \cdot \vect{n} $" src="form_503.png"/>).</p>
<p>The modeling of tangential mesh velocity component differs from one case to another.</p>
<p>The influence of mesh velocity on boundary conditions for fluid modeling is managed and modeled in <code>Code_Saturne</code> as follows:</p><ul>
<li>If <code>ialtyb(ifac)</code> = ibfixe: mesh velocity equals 0. (In case of 'fluid sliding wall' modeling corresponding condition will be specified in Code_Saturne Interface or in <a class="el" href="cs__user__boundary__conditions_8f90.html" title="User subroutine which fills boundary conditions arrays (icodcl, rcodcl) for unknown variables...">cs_user_boundary_conditions.f90</a> subroutine.)</li>
<li>If <code>ialtyb(ifac)</code> = ivimpo: tangential mesh velocity is modeled as a sliding wall velocity in fluid boundary conditions unless a value for fluid sliding wall velocity has been specified by USER in Code_Saturne Interface or in <a class="el" href="cs__user__boundary__conditions_8f90.html" title="User subroutine which fills boundary conditions arrays (icodcl, rcodcl) for unknown variables...">cs_user_boundary_conditions.f90</a> subroutine.</li>
<li>If <code>ialtyb(ifac)</code> = igliss: tangential mesh velocity is not taken into account in fluid boundary conditions (In case of 'fluid sliding wall' modeling corresponding condition will be specified in Code_Saturne Interface or in <a class="el" href="cs__user__boundary__conditions_8f90.html" title="User subroutine which fills boundary conditions arrays (icodcl, rcodcl) for unknown variables...">cs_user_boundary_conditions.f90</a> subroutine.)</li>
<li>If <code>impale(inod)</code> = 1 for all vertices of a boundary face: tangential mesh velocity value that has been derived from nodes displacement is modeled as a sliding wall velocity in fluid boundary conditions unless a value for fluid sliding wall velocity has been specified by USER in Code_Saturne Interface or in <a class="el" href="cs__user__boundary__conditions_8f90.html" title="User subroutine which fills boundary conditions arrays (icodcl, rcodcl) for unknown variables...">cs_user_boundary_conditions.f90</a> subroutine.</li>
</ul>
<p>Note that mesh velocity has no influence on modeling of boundary faces with 'inlet' or 'free outlet' fluid boundary condition.</p>
<p>For "non standard" conditions USER has to manage the influence of boundary conditions for ALE method (i.e. mesh velocity) on the ones for Navier Stokes equations(i.e. fluid velocity). (Note that fluid boundary conditions can be specified in this subroutine.)</p>
<h3><a class="anchor" id="cell_id_ale"></a>
Cells identification</h3>
<p>Cells may be identified using the getcel subroutine. The syntax of this subroutine is described in the <a class="el" href="cs__user__boundary__conditions_8f90.html" title="User subroutine which fills boundary conditions arrays (icodcl, rcodcl) for unknown variables...">cs_user_boundary_conditions.f90</a> subroutine, but a more thorough description can be found in the user guide.</p>
<h3><a class="anchor" id="fac_id_ale"></a>
Faces identification</h3>
<p>Faces may be identified using the <a class="el" href="cs__selector__f2c_8f90.html#a15b3c47b14d96445222d40944aa0d6e1">getfbr</a> subroutine. The syntax of this subroutine is described in the <a class="el" href="cs__user__boundary__conditions_8f90.html" title="User subroutine which fills boundary conditions arrays (icodcl, rcodcl) for unknown variables...">cs_user_boundary_conditions.f90</a> subroutine, but a more thorough description can be found in the user guide.</p>
<h1><a class="anchor" id="example_ale"></a>
Example of boundary conditions ale</h1>
<p>Here is the list of examples:</p>
<p><a class="el" href="example_ale2.html">Examples of boundary conditions ale</a> </p>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Wed Apr 6 2016 17:20:36 by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.7
</small></address>
</body>
</html>
