<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.7"/>
<title>Parallel operations</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="icon.png"/></td>
    <td style="padding-left: 0.5em;">
    <div id="projectbrief">programmer&#39;s documentation</div>
    </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.7 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Home</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="cs_user_examples.html"><span>User&#160;examples</span></a></li>
      <li><a href="cs_var_dico.html"><span>Fortran-C&#160;naming&#160;reference</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="cs_user_examples.html">User examples</a></li><li class="navelem"><a class="el" href="cs_user_extra_operations_examples.html">cs_user_extra_operations.f90</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">Parallel operations </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="cs_user_extra_operations_examples_parallel_operations"></a>
Parallel operations</h1>
<p>This is an example of <a class="el" href="cs__user__extra__operations_8c.html#ab24cad8754d52099d4c8d540c8a4f646">cs_user_extra_operations</a> which performs parallel operations.</p>
<h2><a class="anchor" id="cs_user_extra_operations_examples_loc_var_po"></a>
Local variables to be added</h2>
<div class="fragment"><div class="line"><span class="keywordtype">integer</span>          iel    , ifac</div>
<div class="line"><span class="keywordtype">integer</span>          ii     , nbr    , irangv</div>
<div class="line"><span class="keywordtype">integer</span>          itab(3)</div>
<div class="line"></div>
<div class="line"><span class="keywordtype">double precision</span> rrr</div>
<div class="line"><span class="keywordtype">double precision</span> xyz(3)</div>
<div class="line"></div>
<div class="line"><span class="keywordtype">double precision</span>, <span class="keywordtype">dimension(:,:)</span>, <span class="keywordtype">pointer</span> :: cvar_vel</div>
<div class="line"></div>
</div><!-- fragment --> <h2><a class="anchor" id="cs_user_extra_operations_examples_example_1_po"></a>
Example 1</h2>
<p>Sum of an integer counter 'ii', here the number of cells.</p>
<div class="fragment"><div class="line"><span class="comment">! local value</span></div>
<div class="line">ii = <a class="code" href="group__mesh.html#gab639b5ed89912ab852608e25d395a782">ncel</a></div>
<div class="line"><span class="comment">! global sum</span></div>
<div class="line"><span class="keywordflow">if</span> (<a class="code" href="group__parall.html#ga77fe56a9acf4fc4a56b5d5ab878b7d4f">irangp</a>.ge.0) <span class="keywordflow">then</span></div>
<div class="line">  call <a class="code" href="interfaceparall_1_1parcpt.html#a71a96826438439a5aa3b6a65cdfc799f">parcpt</a>(ii)</div>
<div class="line"><span class="keywordflow">endif</span></div>
<div class="line"><span class="comment">! print the global sum</span></div>
<div class="line"><span class="keyword">write</span>(<a class="code" href="group__entsor.html#ga35356a73490ee90d10e4a96684169505">nfecra</a>,5020)ii</div>
<div class="line"> 5020 <span class="keyword">format</span>(<span class="stringliteral">&#39; cs_user_extra_operations: total number of cells = &#39;</span>, i10)</div>
</div><!-- fragment --> <h2><a class="anchor" id="cs_user_extra_operations_examples_example_2_po"></a>
Example 2</h2>
<p>Maximum of an integer counter 'ii', here the number of cells.</p>
<div class="fragment"><div class="line"><span class="comment">! local value</span></div>
<div class="line">ii = <a class="code" href="group__mesh.html#gab639b5ed89912ab852608e25d395a782">ncel</a></div>
<div class="line"><span class="comment">! global maximum</span></div>
<div class="line"><span class="keywordflow">if</span> (<a class="code" href="group__parall.html#ga77fe56a9acf4fc4a56b5d5ab878b7d4f">irangp</a>.ge.0) <span class="keywordflow">then</span></div>
<div class="line">  call <a class="code" href="interfaceparall_1_1parcmx.html#ae1d6e91f05b00958a13048f9ec936342">parcmx</a>(ii)</div>
<div class="line"><span class="keywordflow">endif</span></div>
<div class="line"><span class="comment">! print the global maximum value</span></div>
<div class="line"><span class="keyword">write</span>(<a class="code" href="group__entsor.html#ga35356a73490ee90d10e4a96684169505">nfecra</a>,5010)ii</div>
<div class="line"> 5010 <span class="keyword">format</span>(<span class="stringliteral">&#39; cs_user_extra_operations: max. number of cells per process = &#39;</span>,&amp;</div>
<div class="line">            i10)</div>
</div><!-- fragment --> <h2><a class="anchor" id="cs_user_extra_operations_examples_example_3_po"></a>
Example 3</h2>
<p>Sum of a real 'rrr', here the volume.</p>
<div class="fragment"><div class="line"><span class="comment">! local value</span></div>
<div class="line">rrr = 0.d0</div>
<div class="line"><span class="keywordflow">do</span> iel = 1, <a class="code" href="group__mesh.html#gab639b5ed89912ab852608e25d395a782">ncel</a></div>
<div class="line">  rrr = rrr + <a class="code" href="group__mesh.html#ga63281eee444c94c800bc957891033901">volume</a>(iel)</div>
<div class="line"><span class="keywordflow">enddo</span></div>
<div class="line"><span class="comment">! global sum</span></div>
<div class="line"><span class="keywordflow">if</span> (<a class="code" href="group__parall.html#ga77fe56a9acf4fc4a56b5d5ab878b7d4f">irangp</a>.ge.0) <span class="keywordflow">then</span></div>
<div class="line">  call <a class="code" href="interfaceparall_1_1parsom.html#a424406b4b54d67ae738db5ab55be7119">parsom</a>(rrr)</div>
<div class="line"><span class="keywordflow">endif</span></div>
<div class="line"><span class="comment">! print the global sum</span></div>
<div class="line"><span class="keyword">write</span>(<a class="code" href="group__entsor.html#ga35356a73490ee90d10e4a96684169505">nfecra</a>,5030)rrr</div>
<div class="line"> 5030 <span class="keyword">format</span>(<span class="stringliteral">&#39; cs_user_extra_operations: total domain volume = &#39;</span>, e14.5)</div>
</div><!-- fragment --> <h2><a class="anchor" id="cs_user_extra_operations_examples_example_4_po"></a>
Example 4</h2>
<p>Minimum of a real 'rrr', here the volume.</p>
<div class="fragment"><div class="line"><span class="comment">! local value</span></div>
<div class="line">rrr = 0.d0</div>
<div class="line"><span class="keywordflow">do</span> iel = 1, <a class="code" href="group__mesh.html#gab639b5ed89912ab852608e25d395a782">ncel</a></div>
<div class="line">  <span class="keywordflow">if</span> (<a class="code" href="group__mesh.html#ga63281eee444c94c800bc957891033901">volume</a>(iel).gt.rrr) rrr = <a class="code" href="group__mesh.html#ga63281eee444c94c800bc957891033901">volume</a>(iel)</div>
<div class="line"><span class="keywordflow">enddo</span></div>
<div class="line"><span class="comment">! global maximum</span></div>
<div class="line"><span class="keywordflow">if</span> (<a class="code" href="group__parall.html#ga77fe56a9acf4fc4a56b5d5ab878b7d4f">irangp</a>.ge.0) <span class="keywordflow">then</span></div>
<div class="line">  call <a class="code" href="interfaceparall_1_1parmax.html#af004f15a444817d60e2167ad160bd6cc">parmax</a>(rrr)</div>
<div class="line"><span class="keywordflow">endif</span></div>
<div class="line"><span class="comment">! print the global maximum</span></div>
<div class="line"><span class="keyword">write</span>(<a class="code" href="group__entsor.html#ga35356a73490ee90d10e4a96684169505">nfecra</a>,5040)rrr</div>
<div class="line"> 5040 <span class="keyword">format</span>(<span class="stringliteral">&#39; cs_user_extra_operations: max volume per process = &#39;</span>, e14.5)</div>
</div><!-- fragment --> <h2><a class="anchor" id="cs_user_extra_operations_examples_example_5_po"></a>
Example 5</h2>
<p>Minimum of a real 'rrr', here the volume.</p>
<div class="fragment"><div class="line"><span class="comment">! local value</span></div>
<div class="line">rrr = <a class="code" href="group__cstnum.html#gad05b1b7b3f2b51b1e0dc51ec539e4b13">grand</a></div>
<div class="line"><span class="keywordflow">do</span> iel = 1, <a class="code" href="group__mesh.html#gab639b5ed89912ab852608e25d395a782">ncel</a></div>
<div class="line">  <span class="keywordflow">if</span> (<a class="code" href="group__mesh.html#ga63281eee444c94c800bc957891033901">volume</a>(iel).lt.rrr) rrr = <a class="code" href="group__mesh.html#ga63281eee444c94c800bc957891033901">volume</a>(iel)</div>
<div class="line"><span class="keywordflow">enddo</span></div>
<div class="line"><span class="comment">! global minimum</span></div>
<div class="line"><span class="keywordflow">if</span> (<a class="code" href="group__parall.html#ga77fe56a9acf4fc4a56b5d5ab878b7d4f">irangp</a>.ge.0) <span class="keywordflow">then</span></div>
<div class="line">  call <a class="code" href="interfaceparall_1_1parmin.html#a2ce7ff2bb7b448cfb9af6dd9b2ff74d5">parmin</a>(rrr)</div>
<div class="line"><span class="keywordflow">endif</span></div>
<div class="line"><span class="comment">! print the global minimum</span></div>
<div class="line"><span class="keyword">write</span>(<a class="code" href="group__entsor.html#ga35356a73490ee90d10e4a96684169505">nfecra</a>,5050)rrr</div>
<div class="line"> 5050 <span class="keyword">format</span>(<span class="stringliteral">&#39; cs_user_extra_operations: min volume per process = &#39;</span>, e14.5)</div>
</div><!-- fragment --> <h2><a class="anchor" id="cs_user_extra_operations_examples_example_6_po"></a>
Example 6</h2>
<p>Maximum of a real and associated real values; here the volume and its location (3 coordinates).</p>
<div class="fragment"><div class="line">nbr = 3</div>
<div class="line">rrr  = -1.d0</div>
<div class="line">xyz(1) = 0.d0</div>
<div class="line">xyz(2) = 0.d0</div>
<div class="line">xyz(3) = 0.d0</div>
<div class="line"><span class="keywordflow">do</span> iel = 1, <a class="code" href="group__mesh.html#gab639b5ed89912ab852608e25d395a782">ncel</a></div>
<div class="line">  <span class="keywordflow">if</span> (rrr.lt.<a class="code" href="group__mesh.html#ga63281eee444c94c800bc957891033901">volume</a>(iel)) <span class="keywordflow">then</span></div>
<div class="line">    rrr = <a class="code" href="group__mesh.html#ga63281eee444c94c800bc957891033901">volume</a>(iel)</div>
<div class="line">    xyz(1) = <a class="code" href="group__mesh.html#gab3429385a23fd26b020626e430f294c6">xyzcen</a>(1,iel)</div>
<div class="line">    xyz(2) = <a class="code" href="group__mesh.html#gab3429385a23fd26b020626e430f294c6">xyzcen</a>(2,iel)</div>
<div class="line">    xyz(3) = <a class="code" href="group__mesh.html#gab3429385a23fd26b020626e430f294c6">xyzcen</a>(3,iel)</div>
<div class="line">  <span class="keywordflow">endif</span></div>
<div class="line"><span class="keywordflow">enddo</span></div>
<div class="line"><span class="comment">! global maximum and associated location</span></div>
<div class="line"><span class="keywordflow">if</span> (<a class="code" href="group__parall.html#ga77fe56a9acf4fc4a56b5d5ab878b7d4f">irangp</a>.ge.0) <span class="keywordflow">then</span></div>
<div class="line">  call <a class="code" href="interfaceparall_1_1parmxl.html#a374a8bba91cbb6212f9d875edb6917f2">parmxl</a>(nbr, rrr, xyz)</div>
<div class="line"><span class="keywordflow">endif</span></div>
<div class="line"><span class="comment">! print the global maximum and its associated values</span></div>
<div class="line"><span class="keyword">write</span>(<a class="code" href="group__entsor.html#ga35356a73490ee90d10e4a96684169505">nfecra</a>,5060) rrr, xyz(1), xyz(2), xyz(3)</div>
<div class="line"> 5060 <span class="keyword">format</span>(<span class="stringliteral">&#39; Cs_user_extra_operations: Max. volume =      &#39;</span>, e14.5, /,  &amp;</div>
<div class="line">             <span class="stringliteral">&#39;         Location (x,y,z) = &#39;</span>, 3e14.5)</div>
</div><!-- fragment --> <h2><a class="anchor" id="cs_user_extra_operations_examples_example_7_po"></a>
Example 7</h2>
<p>Minimum of a real and associated real values; here the volume and its location (3 coordinates).</p>
<div class="fragment"><div class="line">nbr = 3</div>
<div class="line">rrr  = 1.d+30</div>
<div class="line">xyz(1) = 0.d0</div>
<div class="line">xyz(2) = 0.d0</div>
<div class="line">xyz(3) = 0.d0</div>
<div class="line"><span class="keywordflow">do</span> iel = 1, <a class="code" href="group__mesh.html#gab639b5ed89912ab852608e25d395a782">ncel</a></div>
<div class="line">  <span class="keywordflow">if</span> (rrr.gt.<a class="code" href="group__mesh.html#ga63281eee444c94c800bc957891033901">volume</a>(iel)) <span class="keywordflow">then</span></div>
<div class="line">    rrr = <a class="code" href="group__mesh.html#ga63281eee444c94c800bc957891033901">volume</a>(iel)</div>
<div class="line">    xyz(1) = <a class="code" href="group__mesh.html#gab3429385a23fd26b020626e430f294c6">xyzcen</a>(1,iel)</div>
<div class="line">    xyz(2) = <a class="code" href="group__mesh.html#gab3429385a23fd26b020626e430f294c6">xyzcen</a>(2,iel)</div>
<div class="line">    xyz(3) = <a class="code" href="group__mesh.html#gab3429385a23fd26b020626e430f294c6">xyzcen</a>(3,iel)</div>
<div class="line">  <span class="keywordflow">endif</span></div>
<div class="line"><span class="keywordflow">enddo</span></div>
<div class="line"><span class="comment">! global minimum and associated location</span></div>
<div class="line"><span class="keywordflow">if</span> (<a class="code" href="group__parall.html#ga77fe56a9acf4fc4a56b5d5ab878b7d4f">irangp</a>.ge.0) <span class="keywordflow">then</span></div>
<div class="line">  call <a class="code" href="interfaceparall_1_1parmnl.html#a328bc187ce5c5a79e7a3495813920c81">parmnl</a>(nbr,rrr,xyz)</div>
<div class="line"><span class="keywordflow">endif</span></div>
<div class="line"><span class="comment">! print the global minimum and its associated values</span></div>
<div class="line"><span class="keyword">write</span>(<a class="code" href="group__entsor.html#ga35356a73490ee90d10e4a96684169505">nfecra</a>,5070) rrr, xyz(1), xyz(2), xyz(3)</div>
<div class="line"> 5070 <span class="keyword">format</span>(<span class="stringliteral">&#39; Cs_user_extra_operations: Min. volume =      &#39;</span>, e14.5, /,  &amp;</div>
<div class="line">             <span class="stringliteral">&#39;         Location (x,y,z) = &#39;</span>, 3e14.5)</div>
</div><!-- fragment --> <h2><a class="anchor" id="cs_user_extra_operations_examples_example_8_po"></a>
Example 8</h2>
<p>Sum of an array of integers; here, the number of cells, faces, and boundary faces.</p>
<p>local values; note that to avoid counting interior faces on parallel boundaries twice, we check if 'ifacel(1,ifac) .le. ncel', as on a parallel boundary, this is always true for one domain and false for the other.</p>
<div class="fragment"><div class="line">nbr = 3</div>
<div class="line">itab(1) = <a class="code" href="group__mesh.html#gab639b5ed89912ab852608e25d395a782">ncel</a></div>
<div class="line">itab(2) = 0</div>
<div class="line">itab(3) = <a class="code" href="group__mesh.html#gafd405a008e10defbfe94d267457278c5">nfabor</a></div>
<div class="line"><span class="keywordflow">do</span> ifac = 1, <a class="code" href="group__mesh.html#ga984b4f9c95dbef7c83f0dee8bf4168a1">nfac</a></div>
<div class="line">  <span class="keywordflow">if</span> (<a class="code" href="group__mesh.html#ga130a63093e80370693976655259c8335">ifacel</a>(1, ifac).le.<a class="code" href="group__mesh.html#gab639b5ed89912ab852608e25d395a782">ncel</a>) itab(2) = itab(2) + 1</div>
<div class="line"><span class="keywordflow">enddo</span></div>
<div class="line"><span class="comment">! global sum</span></div>
<div class="line"><span class="keywordflow">if</span> (<a class="code" href="group__parall.html#ga77fe56a9acf4fc4a56b5d5ab878b7d4f">irangp</a>.ge.0) <span class="keywordflow">then</span></div>
<div class="line">  call <a class="code" href="interfaceparall_1_1parism.html#ab3a7201f96dd48efb5f8ac41168b46e5">parism</a>(nbr, itab)</div>
<div class="line"><span class="keywordflow">endif</span></div>
<div class="line"><span class="comment">! print the global sums</span></div>
<div class="line"><span class="keyword">write</span>(<a class="code" href="group__entsor.html#ga35356a73490ee90d10e4a96684169505">nfecra</a>,5080) itab(1), itab(2), itab(3)</div>
<div class="line"> 5080 <span class="keyword">format</span>(<span class="stringliteral">&#39; cs_user_extra_operations: Number of cells =         &#39;</span>, i10, /,  &amp;</div>
<div class="line">             <span class="stringliteral">&#39;         Number of interior faces = &#39;</span>, i10, /,  &amp;</div>
<div class="line">             <span class="stringliteral">&#39;         Number of boundary faces = &#39;</span>, i10)</div>
</div><!-- fragment --> <h2><a class="anchor" id="cs_user_extra_operations_examples_example_9_po"></a>
Example 9</h2>
<p>Maxima from an array of integers; here, the number of cells, faces, and boundary faces.</p>
<div class="fragment"><div class="line"><span class="comment">! local values</span></div>
<div class="line">nbr = 3</div>
<div class="line">itab(1) = <a class="code" href="group__mesh.html#gab639b5ed89912ab852608e25d395a782">ncel</a></div>
<div class="line">itab(2) = <a class="code" href="group__mesh.html#ga984b4f9c95dbef7c83f0dee8bf4168a1">nfac</a></div>
<div class="line">itab(3) = <a class="code" href="group__mesh.html#gafd405a008e10defbfe94d267457278c5">nfabor</a></div>
<div class="line"><span class="comment">! global maxima</span></div>
<div class="line"><span class="keywordflow">if</span> (<a class="code" href="group__parall.html#ga77fe56a9acf4fc4a56b5d5ab878b7d4f">irangp</a>.ge.0) <span class="keywordflow">then</span></div>
<div class="line">  call <a class="code" href="interfaceparall_1_1parimx.html#aa3f836dea6a17888dcff77f7bfe156aa">parimx</a>(nbr, itab)</div>
<div class="line"><span class="keywordflow">endif</span></div>
<div class="line"><span class="comment">! print the global maxima</span></div>
<div class="line"><span class="keyword">write</span>(<a class="code" href="group__entsor.html#ga35356a73490ee90d10e4a96684169505">nfecra</a>,5090) itab(1), itab(2), itab(3)</div>
<div class="line"> 5090 <span class="keyword">format</span>(<span class="stringliteral">&#39; cs_user_extra_operations: Max. number of cells per proc. = &#39;</span>, &amp;</div>
<div class="line">             i10, /,  &amp;</div>
<div class="line">             <span class="stringliteral">&#39;         Max. number of interior faces per proc. = &#39;</span>, i10, /,  &amp;</div>
<div class="line">             <span class="stringliteral">&#39;         Max. number of boundary faces per proc. = &#39;</span>, i10)</div>
</div><!-- fragment --><h2><a class="anchor" id="cs_user_extra_operations_examples_example_10_po"></a>
Example 10</h2>
<p>Minima from an array of integers; here, the number of cells, faces, and boundary faces.</p>
<div class="fragment"><div class="line"><span class="comment">! local values</span></div>
<div class="line">nbr = 3</div>
<div class="line">itab(1) = <a class="code" href="group__mesh.html#gab639b5ed89912ab852608e25d395a782">ncel</a></div>
<div class="line">itab(2) = <a class="code" href="group__mesh.html#ga984b4f9c95dbef7c83f0dee8bf4168a1">nfac</a></div>
<div class="line">itab(3) = <a class="code" href="group__mesh.html#gafd405a008e10defbfe94d267457278c5">nfabor</a></div>
<div class="line"><span class="comment">! global minima</span></div>
<div class="line"><span class="keywordflow">if</span> (<a class="code" href="group__parall.html#ga77fe56a9acf4fc4a56b5d5ab878b7d4f">irangp</a>.ge.0) <span class="keywordflow">then</span></div>
<div class="line">  call <a class="code" href="interfaceparall_1_1parimn.html#af14a182a6060fa4eecc2056ac000ab39">parimn</a>(nbr, itab)</div>
<div class="line"><span class="keywordflow">endif</span></div>
<div class="line"><span class="comment">! print the global minima</span></div>
<div class="line"><span class="keyword">write</span>(<a class="code" href="group__entsor.html#ga35356a73490ee90d10e4a96684169505">nfecra</a>,5100) itab(1), itab(2), itab(3)</div>
<div class="line"> 5100 <span class="keyword">format</span>(<span class="stringliteral">&#39; cs_user_extra_operations: Min. number of cells per proc. = &#39;</span>, &amp;</div>
<div class="line">             i10, /,  &amp;</div>
<div class="line">             <span class="stringliteral">&#39;         Min. number of interior faces per proc. = &#39;</span>, i10, /,  &amp;</div>
<div class="line">             <span class="stringliteral">&#39;         Min. number of boundary faces per proc. = &#39;</span>, i10)</div>
</div><!-- fragment --> <h2><a class="anchor" id="cs_user_extra_operations_examples_example_11_po"></a>
Example 11</h2>
<p>Sum of an array of reals; here, the 3 velocity components (so as to compute a mean for example).</p>
<div class="fragment"><div class="line">nbr = 3</div>
<div class="line">xyz(1) = 0.d0</div>
<div class="line">xyz(2) = 0.d0</div>
<div class="line">xyz(3) = 0.d0</div>
<div class="line"><span class="keywordflow">do</span> iel = 1, <a class="code" href="group__mesh.html#gab639b5ed89912ab852608e25d395a782">ncel</a></div>
<div class="line">  xyz(1) = xyz(1) + cvar_vel(1,iel)</div>
<div class="line">  xyz(2) = xyz(2) + cvar_vel(2,iel)</div>
<div class="line">  xyz(3) = xyz(3) + cvar_vel(3,iel)</div>
<div class="line"><span class="keywordflow">enddo</span></div>
<div class="line"><span class="comment">! global sum</span></div>
<div class="line"><span class="keywordflow">if</span> (<a class="code" href="group__parall.html#ga77fe56a9acf4fc4a56b5d5ab878b7d4f">irangp</a>.ge.0) <span class="keywordflow">then</span></div>
<div class="line">  call <a class="code" href="interfaceparall_1_1parrsm.html#a57f71e27cc5f6bfec636e53dba621ca4">parrsm</a>(nbr, xyz)</div>
<div class="line"><span class="keywordflow">endif</span></div>
<div class="line"><span class="comment">! print the global sums</span></div>
<div class="line"><span class="keyword">write</span>(<a class="code" href="group__entsor.html#ga35356a73490ee90d10e4a96684169505">nfecra</a>,5110) xyz(1), xyz(2), xyz(3)</div>
<div class="line"> 5110 <span class="keyword">format</span>(<span class="stringliteral">&#39; cs_user_extra_operations: Sum of U on the domain = &#39;</span>, e14.5, /, &amp;</div>
<div class="line">             <span class="stringliteral">&#39;         Sum of V on the domain = &#39;</span>, e14.5, /,   &amp;</div>
<div class="line">             <span class="stringliteral">&#39;         Sum of V on the domain = &#39;</span>, e14.5)</div>
</div><!-- fragment --> <h2><a class="anchor" id="cs_user_extra_operations_examples_example_12_po"></a>
Example 12</h2>
<p>Maximum of an array of reals; here, the 3 velocity components.</p>
<div class="fragment"><div class="line">nbr = 3</div>
<div class="line">xyz(1) = cvar_vel(1,1)</div>
<div class="line">xyz(2) = cvar_vel(2,1)</div>
<div class="line">xyz(3) = cvar_vel(3,1)</div>
<div class="line"><span class="keywordflow">do</span> iel = 1, <a class="code" href="group__mesh.html#gab639b5ed89912ab852608e25d395a782">ncel</a></div>
<div class="line">  xyz(1) = max(xyz(1),cvar_vel(1,iel))</div>
<div class="line">  xyz(2) = max(xyz(2),cvar_vel(2,iel))</div>
<div class="line">  xyz(3) = max(xyz(3),cvar_vel(3,iel))</div>
<div class="line"><span class="keywordflow">enddo</span></div>
<div class="line"><span class="comment">! global maximum</span></div>
<div class="line"><span class="keywordflow">if</span> (<a class="code" href="group__parall.html#ga77fe56a9acf4fc4a56b5d5ab878b7d4f">irangp</a>.ge.0) <span class="keywordflow">then</span></div>
<div class="line">  call <a class="code" href="interfaceparall_1_1parrmx.html#a9242f5be058af8135fc5d769d6ed61ab">parrmx</a>(nbr, xyz)</div>
<div class="line"><span class="keywordflow">endif</span></div>
<div class="line"><span class="comment">! print the global maxima</span></div>
<div class="line"><span class="keyword">write</span>(<a class="code" href="group__entsor.html#ga35356a73490ee90d10e4a96684169505">nfecra</a>,5120) xyz(1), xyz(2), xyz(3)</div>
<div class="line"> 5120 <span class="keyword">format</span>(<span class="stringliteral">&#39; cs_user_extra_operations: Maximum of U on the domain = &#39;</span>,  &amp;</div>
<div class="line">             e14.5, /,   &amp;</div>
<div class="line">             <span class="stringliteral">&#39;         Maximum of V on the domain = &#39;</span>, e14.5, /,   &amp;</div>
<div class="line">             <span class="stringliteral">&#39;         Maximum of V on the domain = &#39;</span>, e14.5)</div>
</div><!-- fragment --> <h2><a class="anchor" id="cs_user_extra_operations_examples_example_13_po"></a>
Example 13</h2>
<p>Maximum of an array of reals; here, the 3 velocity components.</p>
<div class="fragment"><div class="line"><span class="comment">! local values</span></div>
<div class="line">nbr = 3</div>
<div class="line">xyz(1) = cvar_vel(1,1)</div>
<div class="line">xyz(2) = cvar_vel(2,1)</div>
<div class="line">xyz(3) = cvar_vel(3,1)</div>
<div class="line"><span class="keywordflow">do</span> iel = 1, <a class="code" href="group__mesh.html#gab639b5ed89912ab852608e25d395a782">ncel</a></div>
<div class="line">  xyz(1) = min(xyz(1),cvar_vel(1,iel))</div>
<div class="line">  xyz(2) = min(xyz(2),cvar_vel(2,iel))</div>
<div class="line">  xyz(3) = min(xyz(3),cvar_vel(3,iel))</div>
<div class="line"><span class="keywordflow">enddo</span></div>
<div class="line"><span class="comment">! global minimum</span></div>
<div class="line"><span class="keywordflow">if</span> (<a class="code" href="group__parall.html#ga77fe56a9acf4fc4a56b5d5ab878b7d4f">irangp</a>.ge.0) <span class="keywordflow">then</span></div>
<div class="line">  call <a class="code" href="interfaceparall_1_1parrmn.html#ab532205b71087fa9710593b32c8c9cd4">parrmn</a>(nbr, xyz)</div>
<div class="line"><span class="keywordflow">endif</span></div>
<div class="line"><span class="comment">! print the global maxima</span></div>
<div class="line"><span class="keyword">write</span>(<a class="code" href="group__entsor.html#ga35356a73490ee90d10e4a96684169505">nfecra</a>,5130) xyz(1), xyz(2), xyz(3)</div>
<div class="line"> 5130 <span class="keyword">format</span>(<span class="stringliteral">&#39; cs_user_extra_operations: Minimum of U on the domain = &#39;</span>, &amp;</div>
<div class="line">             e14.5, /,   &amp;</div>
<div class="line">             <span class="stringliteral">&#39;         Minimum of V on the domain = &#39;</span>, e14.5, /,   &amp;</div>
<div class="line">             <span class="stringliteral">&#39;         Minimum of V on the domain = &#39;</span>, e14.5)</div>
</div><!-- fragment --> <h2><a class="anchor" id="cs_user_extra_operations_examples_example_14_po"></a>
Example 14</h2>
<p>Broadcast an array of local integers to other ranks; in this example, we use the number of cells, interior faces, and boundary faces from process rank 0 (irangv).</p>
<div class="fragment"><div class="line"><span class="comment">! local values</span></div>
<div class="line">irangv = 0</div>
<div class="line">nbr = 3</div>
<div class="line">itab(1) = <a class="code" href="group__mesh.html#gab639b5ed89912ab852608e25d395a782">ncel</a></div>
<div class="line">itab(2) = <a class="code" href="group__mesh.html#ga984b4f9c95dbef7c83f0dee8bf4168a1">nfac</a></div>
<div class="line">itab(3) = <a class="code" href="group__mesh.html#gafd405a008e10defbfe94d267457278c5">nfabor</a></div>
<div class="line"><span class="comment">! broadcast from rank irangv to all others</span></div>
<div class="line"><span class="keywordflow">if</span> (<a class="code" href="group__parall.html#ga77fe56a9acf4fc4a56b5d5ab878b7d4f">irangp</a>.ge.0) <span class="keywordflow">then</span></div>
<div class="line">  call <a class="code" href="interfaceparall_1_1parbci.html#a810c06660225ae420a93310381803066">parbci</a>(irangv, nbr, itab)</div>
<div class="line"><span class="keywordflow">endif</span></div>
<div class="line"><span class="comment">! print values broadcast and received from rank &#39;irangv&#39;</span></div>
<div class="line"><span class="keyword">write</span>(<a class="code" href="group__entsor.html#ga35356a73490ee90d10e4a96684169505">nfecra</a>,5140) irangv, itab(1), itab(2), itab(3)</div>
<div class="line"> 5140 <span class="keyword">format</span>(<span class="stringliteral">&#39; cs_user_extra_operations: On rank &#39;</span>, i10 , /,   &amp;</div>
<div class="line">             <span class="stringliteral">&#39;         Number of cells          = &#39;</span>, i10, /,   &amp;</div>
<div class="line">             <span class="stringliteral">&#39;         Number of interior faces = &#39;</span>, i10, /,   &amp;</div>
<div class="line">             <span class="stringliteral">&#39;         Number of boundary faces = &#39;</span>, i10)</div>
</div><!-- fragment --> <h2><a class="anchor" id="cs_user_extra_operations_examples_example_15_po"></a>
Example 15</h2>
<p>Broadcast an array of local reals to other ranks; in this example, we use 3 velocity values from process rank 0 (irangv).</p>
<div class="fragment"><div class="line"><span class="comment">! local values</span></div>
<div class="line">irangv = 0</div>
<div class="line">nbr = 3</div>
<div class="line">xyz(1) = cvar_vel(1,1)</div>
<div class="line">xyz(2) = cvar_vel(2,1)</div>
<div class="line">xyz(3) = cvar_vel(3,1)</div>
<div class="line"><span class="comment">! broadcast from rank irangv to all others</span></div>
<div class="line"><span class="keywordflow">if</span> (<a class="code" href="group__parall.html#ga77fe56a9acf4fc4a56b5d5ab878b7d4f">irangp</a>.ge.0) <span class="keywordflow">then</span></div>
<div class="line">  call <a class="code" href="interfaceparall_1_1parbcr.html#a91981346433bd480f32301f53ed8516b">parbcr</a>(irangv, nbr, xyz)</div>
<div class="line"><span class="keywordflow">endif</span></div>
<div class="line"><span class="comment">! print values broadcast and received from rank &#39;irangv&#39;</span></div>
<div class="line"><span class="keyword">write</span>(<a class="code" href="group__entsor.html#ga35356a73490ee90d10e4a96684169505">nfecra</a>,5150) irangv, xyz(1), xyz(2), xyz(3)</div>
<div class="line"> 5150 <span class="keyword">format</span>(<span class="stringliteral">&#39; cs_user_extra_operations: On rank &#39;</span>, i10 , /,     &amp;</div>
<div class="line">             <span class="stringliteral">&#39;         Velocity U in first cell = &#39;</span>, e14.5, /,   &amp;</div>
<div class="line">             <span class="stringliteral">&#39;         Velocity V in first cell = &#39;</span>, e14.5, /,   &amp;</div>
<div class="line">             <span class="stringliteral">&#39;         Velocity W in first cell = &#39;</span>, e14.5)</div>
</div><!-- fragment --></div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Wed Apr 6 2016 17:20:36 by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.7
</small></address>
</body>
</html>
